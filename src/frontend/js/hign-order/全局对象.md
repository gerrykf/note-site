# 全局对象

无论是浏览器环境，还是 node 环境，都会提供一个全局对象

- 浏览器环境：window
- node 环境：global

全局对象有下面几个特点：

- 全局对象的属性可以被直接访问

- 给未声明的变量赋值，实际就是给全局对象的属性赋值

  > 永远别这么干

- 所有的全局变量、全局函数都会附加到全局对象

  > 这称之为全局污染，又称之为全局暴露，或简称污染、暴露
  >
  > 如果要避免污染，需要使用**立即执行函数**改变其作用域
  >
  > 立即执行函数又称之为 IIFE，它的全称是 Immediately Invoked Function Expression
  >
  > **IIFE 通常用于强行改变作用域**

## 多个 js 造成的全局污染

```js
//1.js
var a = 1; // 不希望暴漏在全局对象中，但是直接这样写就污染了全局,其他js文件时可以访问到的

function b() {} // 希望暴漏在全局对象中

//2.js
console.log(a); // 1
b();
```

## 解决 js 的全局污染

- 使用立即函数改变其作用域

```js
// 1.js
var module1 = (function () {
  var a = 1;
  var b = 2;
  function c() {
    console.log(a + b);
  }

  return {
    b: b,
    c: c
  };
})();

// 2.js
(function () {
  console.log(module1.b);
  module1.c();
})();
```

> 这样解决了 1.js 中 a 不想暴漏在全局对象中
>
> 立即函数的做法就是将其所有变量跟函数声明全部归纳在函数作用域中，全局属于外部，外部不能访问内部的变量跟函数声明
